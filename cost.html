<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Shipping costs outside T√ºrkiye</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .top-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            gap: 15px;
        }
        .language-selector {
            display: flex;
            gap: 10px;
        }
        .language-btn {
            padding: 8px 15px;
            background-color: #e63946;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }
        .language-btn.active {
            background-color: #d62828;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
        }
        .rates-display {
            background-color: #fff;
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-size: 13px;
            color: #444;
            border-left: 4px solid #e63946;
            line-height: 1.5;
        }
        .rates-display span {
            font-weight: bold;
            color: #e63946;
        }
        .form-container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        h1 {
            color: #e63946;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            box-sizing: border-box;
        }
        #hesapla {
            width: 100%;
            padding: 15px;
            background-color: #e63946;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }
        #hesapla:hover {
            background-color: #d62828;
        }
        .result-section {
            margin-top: 25px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border-left: 5px solid #e63946;
            display: none;
        }
        .result-section h3 {
            margin-top: 0;
            color: #e63946;
            text-align: center;
            font-size: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        .currency-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        .currency-box {
            background: white;
            padding: 15px 10px;
            border-radius: 5px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .currency-box h4 { margin: 0 0 10px 0; font-size: 14px; color: #666; }
        .currency-box .price { font-size: 18px; font-weight: bold; color: #333; }
        
        .loading { display: none; text-align: center; margin-top: 20px; }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #e63946;
            border-radius: 50%;
            width: 30px; height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .bank-info {
            margin-top: 30px; padding: 20px;
            background: #fff; border-radius: 8px; border: 1px solid #eee;
            display: none;
        }
        .bank-info table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .bank-info th, .bank-info td { padding: 10px; text-align: left; border-bottom: 1px solid #eee; font-size: 14px; }
        .bank-info th { background: #f9f9f9; width: 35%; }

        @media (max-width: 600px) {
            .top-container { flex-direction: column; align-items: stretch; }
            .rates-display { text-align: center; font-size: 12px; }
            .currency-grid { grid-template-columns: 1fr; }
            h1 { font-size: 22px; }
        }
    </style>
</head>
<body>

    <div class="top-container">
        <div class="language-selector">
            <button class="language-btn active" id="tr-btn">TR</button>
            <button class="language-btn" id="en-btn">EN</button>
        </div>
        <div class="rates-display" id="rates-display">
            ‚è≥ Kurlar alƒ±nƒ±yor...
        </div>
    </div>

    <div class="form-container">
        <h1 id="page-title">Shipping costs outside T√ºrkiye</h1>
        
        <div class="form-group">
            <label for="model" id="model-label">Model Se√ßin:</label>
            <select id="model">
                <option value="standart" data-tr="Standart Mangal" data-en="Standard Grill">Standart Mangal</option>
                <option value="aparatli" data-tr="≈ûi≈ü Kebap Aparatlƒ±" data-en="With Shish Kebab Apparatus">≈ûi≈ü Kebap Aparatlƒ±</option>
            </select>
        </div>

        <div class="form-group">
            <label for="ulke" id="country-label">Select Country:</label>
            <select id="ulke">
                <option value="">-- Select Country --</option>
            </select>
        </div>
        
        <button id="hesapla" data-tr="Hesapla" data-en="Calculate">Calculate</button>
        
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p id="calculating-text">Calculating...</p>
        </div>

        <div id="sonuc" class="result-section">
            <h3 id="sonuc-title">Shipping Price</h3>
            <div class="currency-grid">
                <div class="currency-box">
                    <h4 id="tl-title">TRY</h4>
                    <div class="price" id="tl_sonuc"></div>
                </div>
                <div class="currency-box">
                    <h4 id="eur-title">EUR</h4>
                    <div class="price" id="eur_sonuc"></div>
                </div>
                <div class="currency-box">
                    <h4 id="usd-title">USD</h4>
                    <div class="price" id="usd_sonuc"></div>
                </div>
            </div>
        </div>

        <div id="product-info" class="result-section">
            <h3 id="product-info-title">Product Price</h3>
            <div class="currency-grid">
                <div class="currency-box">
                    <h4 id="product-tl-title">TRY</h4>
                    <div class="price" id="product_tl"></div>
                </div>
                <div class="currency-box">
                    <h4 id="product-eur-title">EUR</h4>
                    <div class="price" id="product_eur"></div>
                </div>
                <div class="currency-box">
                    <h4 id="product-usd-title">USD</h4>
                    <div class="price" id="product_usd"></div>
                </div>
            </div>
        </div>

        <div id="total-info" class="result-section">
            <h3 id="total-info-title">Total Amount</h3>
            <div class="currency-grid">
                <div class="currency-box">
                    <h4 id="total-tl-title">TRY</h4>
                    <div class="price" id="total_tl"></div>
                </div>
                <div class="currency-box">
                    <h4 id="total-eur-title">EUR</h4>
                    <div class="price" id="total_eur"></div>
                </div>
                <div class="currency-box">
                    <h4 id="total-usd-title">USD</h4>
                    <div class="price" id="total_usd"></div>
                </div>
            </div>
        </div>

        <div id="bank-info" class="bank-info">
            <h3 id="bank-info-title">Bank Account Information</h3>
            <table>
                <tr><th id="bank-label">Bank</th><td>Garanti BBVA</td></tr>
                <tr><th id="swift-label">Swift</th><td>TGBATRISXXX</td></tr>
                <tr><th id="account-name-label">Account Name</th><td>ENES CANIDEMƒ∞R</td></tr>
                <tr><th id="try-iban-label">TRY IBAN</th><td>TR85 0006 2000 7590 0006 6567 74</td></tr>
                <tr><th id="usd-iban-label">USD IBAN</th><td>TR47 0006 2000 7590 0009 0816 82</td></tr>
                <tr><th id="eur-iban-label">EUR IBAN</th><td>TR96 0006 2000 7590 0009 0755 62</td></tr>
            </table>
        </div>
    </div>

    <script>
        const translations = {
            tr: {
                "page-title": "T√ºrkiye Dƒ±≈üƒ± Kargo √úcretleri",
                "model-label": "√úr√ºn Se√ßin:",
                "country-label": "√úlke Se√ßin:",
                "hesapla": "Hesapla",
                "calculating-text": "Hesaplanƒ±yor...",
                "tl-title": "T√ºrk Lirasƒ± (TL)",
                "eur-title": "Euro (EUR)",
                "usd-title": "ABD Dolarƒ± (USD)",
                "bank-info-title": "Banka Hesap Bilgileri",
                "bank-label": "Banka",
                "swift-label": "Swift",
                "account-name-label": "Hesap Adƒ±",
                "try-iban-label": "TRY IBAN",
                "usd-iban-label": "USD IBAN",
                "eur-iban-label": "EUR IBAN",
                "select-country": "-- √úlke Se√ßin --",
                "sonuc-title": "Kargo √úcreti (+200‚Ç∫ Pay Dahil)",
                "product-info-title": "√úr√ºn Fiyatƒ±",
                "total-info-title": "Toplam √ñdenecek Tutar"
            },
            en: {
                "page-title": "International Shipping Costs",
                "model-label": "Choose Product:",
                "country-label": "Select Country:",
                "hesapla": "Calculate",
                "calculating-text": "Calculating...",
                "tl-title": "Turkish Lira (TL)",
                "eur-title": "Euro (EUR)",
                "usd-title": "US Dollar (USD)",
                "bank-info-title": "Bank Account Information",
                "bank-label": "Bank",
                "swift-label": "Swift",
                "account-name-label": "Account Name",
                "try-iban-label": "TRY IBAN",
                "usd-iban-label": "USD IBAN",
                "eur-iban-label": "EUR IBAN",
                "select-country": "-- Select Country --",
                "sonuc-title": "Shipping Price (+200‚Ç∫ Safety Inc.)",
                "product-info-title": "Product Price",
                "total-info-title": "Total Amount to Pay"
            }
        };

        const ulkeVerileri = [
            { kod: "AFGANISTAN", tr: "Afganistan", en: "Afghanistan" },
            { kod: "ALMANYA", tr: "Almanya", en: "Germany" },
            { kod: "AMERIKA", tr: "Amerika Birle≈üik Devletleri", en: "United States" },
            { kod: "AVUSTURYA", tr: "Avusturya", en: "Austria" },
            { kod: "AVUSTRALYA", tr: "Avustralya", en: "Australia" },
            { kod: "AZERBAYCAN", tr: "Azerbaycan", en: "Azerbaijan" },
            { kod: "BELCIKA", tr: "Bel√ßika", en: "Belgium" },
            { kod: "BOSNA_HERSEK", tr: "Bosna Hersek", en: "Bosnia and Herzegovina" },
            { kod: "BULGARISTAN", tr: "Bulgaristan", en: "Bulgaria" },
            { kod: "CEKYA", tr: "√áekya", en: "Czech Republic" },
            { kod: "CIN_HALK_CUMHURIYETI", tr: "√áin Halk Cumhuriyeti", en: "China" },
            { kod: "DANIMARKA", tr: "Danimarka", en: "Denmark" },
            { kod: "FRANSA", tr: "Fransa", en: "France" },
            { kod: "GUNEY_KORE", tr: "G√ºney Kore", en: "South Korea" },
            { kod: "GURCISTAN", tr: "G√ºrcistan", en: "Georgia" },
            { kod: "HOLLANDA", tr: "Hollanda", en: "Netherlands" },
            { kod: "INGILTERE", tr: "ƒ∞ngiltere", en: "United Kingdom" },
            { kod: "IRAK", tr: "Irak", en: "Iraq" },
            { kod: "IRLANDA", tr: "ƒ∞rlanda", en: "Ireland" },
            { kod: "ISPANYA", tr: "ƒ∞spanya", en: "Spain" },
            { kod: "ISRAIL", tr: "ƒ∞srail", en: "Israel" },
            { kod: "ISVEC", tr: "ƒ∞sve√ß", en: "Sweden" },
            { kod: "ISVICRE", tr: "ƒ∞svi√ßre", en: "Switzerland" },
            { kod: "ITALYA", tr: "ƒ∞talya", en: "Italy" },
            { kod: "JAPONYA", tr: "Japonya", en: "Japan" },
            { kod: "KANADA", tr: "Kanada", en: "Canada" },
            { kod: "KATAR", tr: "Katar", en: "Qatar" },
            { kod: "KUZEY_KIBRIS", tr: "Kuzey Kƒ±brƒ±s T√ºrk Cumhuriyeti", en: "Northern Cyprus" },
            { kod: "MISIR", tr: "Mƒ±sƒ±r", en: "Egypt" },
            { kod: "NORVEC", tr: "Norve√ß", en: "Norway" },
            { kod: "POLONYA", tr: "Polonya", en: "Poland" },
            { kod: "PORTEKIZ", tr: "Portekiz", en: "Portugal" },
            { kod: "ROMANYA", tr: "Romanya", en: "Romania" },
            { kod: "RUSYA", tr: "Rusya", en: "Russia" },
            { kod: "SUUD_ARABISTAN", tr: "Suudi Arabistan", en: "Saudi Arabia" },
            { kod: "UKRAYNA", tr: "Ukrayna", en: "Ukraine" },
            { kod: "YUNANISTAN", tr: "Yunanistan", en: "Greece" }
        ];

        const ulkeFiyatlari = {
            "AFGANISTAN": { ilk1kg: 22.98, sonrakiHer1kg: 6.97 },
            "ALMANYA": { ilk1kg: 13.82, sonrakiHer1kg: 2.52 },
            "AMERIKA": { ilk1kg: 23.48, sonrakiHer1kg: 11.95 },
            "AVUSTURYA": { ilk1kg: 17.15, sonrakiHer1kg: 2.55 },
            "AVUSTRALYA": { ilk1kg: 36.48, sonrakiHer1kg: 23.72 },
            "AZERBAYCAN": { ilk1kg: 8.23, sonrakiHer1kg: 3.04 },
            "BELCIKA": { ilk1kg: 21.81, sonrakiHer1kg: 3.42 },
            "BOSNA_HERSEK": { ilk1kg: 14.72, sonrakiHer1kg: 2.77 },
            "BULGARISTAN": { ilk1kg: 11.82, sonrakiHer1kg: 1.96 },
            "CEKYA": { ilk1kg: 12.68, sonrakiHer1kg: 2.87 },
            "CIN_HALK_CUMHURIYETI": { ilk1kg: 18.63, sonrakiHer1kg: 8.36 },
            "DANIMARKA": { ilk1kg: 20.98, sonrakiHer1kg: 4.78 },
            "FRANSA": { ilk1kg: 20.32, sonrakiHer1kg: 4.37 },
            "GUNEY_KORE": { ilk1kg: 20.15, sonrakiHer1kg: 7.85 },
            "GURCISTAN": { ilk1kg: 20.33, sonrakiHer1kg: 4.73 },
            "HOLLANDA": { ilk1kg: 16.32, sonrakiHer1kg: 4.44 },
            "INGILTERE": { ilk1kg: 18.34, sonrakiHer1kg: 7.62 },
            "IRAK": { ilk1kg: 11.82, sonrakiHer1kg: 3.45 },
            "IRLANDA": { ilk1kg: 16.95, sonrakiHer1kg: 5.76 },
            "ISPANYA": { ilk1kg: 20.15, sonrakiHer1kg: 5.90 },
            "ISRAIL": { ilk1kg: 26.11, sonrakiHer1kg: 12.24 },
            "ISVEC": { ilk1kg: 26.59, sonrakiHer1kg: 6.85 },
            "ISVICRE": { ilk1kg: 17.36, sonrakiHer1kg: 4.68 },
            "ITALYA": { ilk1kg: 17.97, sonrakiHer1kg: 4.86 },
            "JAPONYA": { ilk1kg: 21.06, sonrakiHer1kg: 9.18 },
            "KANADA": { ilk1kg: 25.45, sonrakiHer1kg: 11.29 },
            "KATAR": { ilk1kg: 12.65, sonrakiHer1kg: 3.67 },
            "KUZEY_KIBRIS": { ilk1kg: 4.71, sonrakiHer1kg: 1.39 },
            "MISIR": { ilk1kg: 13.74, sonrakiHer1kg: 5.24 },
            "NORVEC": { ilk1kg: 27.66, sonrakiHer1kg: 6.68 },
            "POLONYA": { ilk1kg: 20.89, sonrakiHer1kg: 5.87 },
            "PORTEKIZ": { ilk1kg: 20.59, sonrakiHer1kg: 6.15 },
            "ROMANYA": { ilk1kg: 23.04, sonrakiHer1kg: 3.76 },
            "RUSYA": { ilk1kg: 15.96, sonrakiHer1kg: 5.54 },
            "SUUD_ARABISTAN": { ilk1kg: 12.33, sonrakiHer1kg: 4.98 },
            "UKRAYNA": { ilk1kg: 22.81, sonrakiHer1kg: 4.86 },
            "YUNANISTAN": { ilk1kg: 14.40, sonrakiHer1kg: 3.08 }
        };

        const modelConfig = {
            standart: { price: 9000, weight: 10 },
            aparatli: { price: 10500, weight: 11 }
        };

        window.currentRates = null;

        async function getExchangeRates() {
            const ratesDisplay = document.getElementById('rates-display');
            try {
                const response = await fetch('/api/rates');
                if (!response.ok) throw new Error('API Hatasƒ±');
                const rates = await response.json();
                if (!rates.SDR) rates.SDR = 60.31; 

                ratesDisplay.innerHTML = `
                    üìÖ ${rates.Tarih} <br>
                    <span>USD: ${rates.USD.toFixed(2)} ‚Ç∫</span> | 
                    <span>EUR: ${rates.EUR.toFixed(2)} ‚Ç∫</span> | 
                    <span>SDR: ${rates.SDR.toFixed(2)} ‚Ç∫</span>
                `;
                ratesDisplay.style.display = 'block';
                return rates;
            } catch (error) {
                const fallback = { USD: 43.94, EUR: 51.88, SDR: 60.31, Tarih: "Sabit Kur" };
                ratesDisplay.innerHTML = `‚ö†Ô∏è G√ºncel kur alƒ±namadƒ±.`;
                ratesDisplay.style.display = 'block';
                return fallback;
            }
        }

        const roundTL = (n) => Math.ceil(n / 10) * 10;
        const roundCUR = (n) => Math.ceil(n);

        function changeLanguage(lang) {
            Object.keys(translations[lang]).forEach(id => {
                const el = document.getElementById(id);
                if (el) el.innerHTML = translations[lang][id];
            });
            
            // Model isimlerini √ßevir
            const modelSelect = document.getElementById('model');
            Array.from(modelSelect.options).forEach(opt => {
                opt.textContent = opt.getAttribute(`data-${lang}`);
            });

            const select = document.getElementById('ulke');
            const currentVal = select.value;
            select.innerHTML = `<option value="">${translations[lang]['select-country']}</option>`;
            
            ulkeVerileri.sort((a,b) => a[lang].localeCompare(b[lang])).forEach(u => {
                const opt = document.createElement('option');
                opt.value = u.kod;
                opt.textContent = u[lang];
                select.appendChild(opt);
            });
            select.value = currentVal;

            document.querySelectorAll('.language-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`${lang}-btn`).classList.add('active');
        }

        document.getElementById('tr-btn').onclick = () => changeLanguage('tr');
        document.getElementById('en-btn').onclick = () => changeLanguage('en');

        window.onload = async () => {
            changeLanguage('tr');
            window.currentRates = await getExchangeRates();
        };

        document.getElementById('hesapla').onclick = async function() {
            const ulkeKod = document.getElementById('ulke').value;
            if (!ulkeKod) { alert('L√ºtfen √ºlke se√ßin!'); return; }

            const selectedModelKey = document.getElementById('model').value;
            const model = modelConfig[selectedModelKey];

            document.getElementById('loading').style.display = 'block';
            ['sonuc', 'product-info', 'total-info', 'bank-info'].forEach(id => document.getElementById(id).style.display = 'none');

            if (!window.currentRates) window.currentRates = await getExchangeRates();
            const rates = window.currentRates;
            const f = ulkeFiyatlari[ulkeKod];

            // 1. Kargo Hesaplama (Dinamik Aƒüƒ±rlƒ±k + 200‚Ç∫ G√ºvenlik Payƒ±)
            // SDR Form√ºl√º: ƒ∞lk 1kg + (Toplam KG - 1) * Sonraki birimler
            const sdrToplam = f.ilk1kg + ((model.weight - 1) * f.sonrakiHer1kg);
            const tlKargo = roundTL((sdrToplam * rates.SDR) + 200);
            const eurKargo = roundCUR(tlKargo / rates.EUR);
            const usdKargo = roundCUR(tlKargo / rates.USD);

            // 2. √úr√ºn Fiyatƒ± (Modele g√∂re 9000 veya 10500)
            const urunTL = model.price;
            const urunEUR = roundCUR(urunTL / rates.EUR);
            const urunUSD = roundCUR(urunTL / rates.USD);

            // Sonu√ßlarƒ± Yazdƒ±r
            document.getElementById('tl_sonuc').innerText = tlKargo + " ‚Ç∫";
            document.getElementById('eur_sonuc').innerText = eurKargo + " ‚Ç¨";
            document.getElementById('usd_sonuc').innerText = usdKargo + " $";

            document.getElementById('product_tl').innerText = urunTL + " ‚Ç∫";
            document.getElementById('product_eur').innerText = urunEUR + " ‚Ç¨";
            document.getElementById('product_usd').innerText = urunUSD + " $";

            document.getElementById('total_tl').innerText = (tlKargo + urunTL) + " ‚Ç∫";
            document.getElementById('total_eur').innerText = (eurKargo + urunEUR) + " ‚Ç¨";
            document.getElementById('total_usd').innerText = (usdKargo + urunUSD) + " $";

            document.getElementById('loading').style.display = 'none';
            ['sonuc', 'product-info', 'total-info', 'bank-info'].forEach(id => document.getElementById(id).style.display = 'block');
        };
    </script>
</body>
</html>
